function displayFields(form, customHTML){	log.info("====================== DISPLAY FIELDS ======================" );	form.setShowDisabledFields(true);	form.setHidePrintLink(true);	var numActivity = getValue("WKNumState");	var numSolic = getValue("WKNumProces");	var ArrayStatus = new Array();	var count = 0;	log.info("Numero da Atividade do Plano de Acao: " + numActivity + ":" + numSolic);	if (numActivity == "0" || numActivity == "1") {		//Traz nome do usuário pela matrícula		var c1 = DatasetFactory.createConstraint("colleaguePK.colleagueId", getValue("WKUser"), getValue("WKUser"), ConstraintType.MUST);		var constraints = new Array(c1);		var colaborador = DatasetFactory.getDataset("colleague", null, constraints, null);		form.setValue('nmResponsavelPA', colaborador.getValue(0, "colleagueName"));		form.setValue('hiddenMatResponsavel', getValue("WKUser"));		log.info("Responsavel: " + getValue("WKUser") + " " + colaborador.getValue(0, "colleagueName"));				//Traz o número do processo pai, e um campo do processo pai		var pesquisa = DatasetFactory.createConstraint("workflowProcessPK.processInstanceId", getValue("WKNumProces"), getValue("WKNumProces"), ConstraintType.MUST);		var constrain = new Array(pesquisa);		var proc = DatasetFactory.getDataset("workflowProcess", null, constrain, null);			var numProcessoPai;			try {			numProcessoPai = proc.getValue(0, "sourceProcess");			log.info("Numero RO: " + numProcessoPai);					}catch(e) {				log.info("Ocorreu um erro ao buscar numero RO: " + numProcessoPai);		}		if (numProcessoPai != undefined) {			form.setValue('cdOcorrencia', proc.getValue(0, "sourceProcess"));						var filtro = DatasetFactory.createConstraint("cdOcorrencia", numProcessoPai, numProcessoPai, ConstraintType.MUST);			var filtro2 = DatasetFactory.createConstraint("metadata#active", true, true, ConstraintType.MUST);			var consulta = new Array(filtro,filtro2);			var responsavel = DatasetFactory.getDataset("ecm_kgq_ro", null, consulta, null);			log.info("teste    >>"+responsavel.rowsCount);			log.info("teste    >>"+responsavel.getValue(0, "metadata#version"));			//log.info("teste    >>"+responsavel.getValue(1, "metadata#version"));			log.info("teste    >>"+responsavel.getValue(0, "metadata#id"));			//log.info("teste    >>"+responsavel.getValue(1, "metadata#id"));			try {				var nmResponsavel = responsavel.getValue(0, "nmUsuario");				form.setValue('nmResponsavelOcorrencia', nmResponsavel);				log.info("Responsavel RO: " + nmResponsavel);				}catch(e) {}		}		var date = new Date();		var Dia = date.getDate();		var month = date.getMonth()+ 1;                if (Dia.toString().length <= 1) {        	Dia = '0' + Dia;        }                if (month.toString().length <= 1) {        	month = '0' + month;        }        var dataAtual = Dia + "/" + month + "/" + date.getFullYear();        form.setValue('nmDataPA', dataAtual);	} else if (numSolic != null) {				//Traz status das atividades		var constraint1 = DatasetFactory.createConstraint("cdPlanoAcao", numSolic, numSolic, ConstraintType.MUST);		var constraint2 = DatasetFactory.createConstraint("metadata#active", "true", "true",ConstraintType.MUST);					log.info("Pesquisa");			var constraints = new Array(constraint1, constraint2);		log.info("Constraints");			var sortingFields = new Array("cdAtividadePA");		var actPlanAction = DatasetFactory.getDataset("ecm_kgq_atividadepa", null, constraints, sortingFields);			log.info("Numero de atividades do plano de acao: " + actPlanAction.rowsCount);				// Posiciona os status das atividades nas linhas corretas da respectiva atividade		var z = 1;		for(var i=0; i < actPlanAction.rowsCount; i++) {			var state = actPlanAction.getValue(i, "status");			var dtConclusaoReal = "";						if (state.toUpperCase() == "FINALIZADO") {				dtConclusaoReal = actPlanAction.getValue(i, "dtConclusaoReal");							}						log.info("Numero Atividade PA: " + actPlanAction.getValue(i, "cdAtividadePA"));			while (z) {				var campoCont = form.getValue("nmStatus___" + z);				if (campoCont == null) {					z = z + 1;				} else {					form.setValue("nmStatus___" + z, state);					form.setValue("nmDtFinalReal___" + z, dtConclusaoReal);					log.info("Estado da AtividadePA: " + actPlanAction.getValue(i, "status"));										if (state != "") {						ArrayStatus[count, count] = ['nmStatus___' + z, state];						//log.info("valor do ARRAY " + ArrayStatus[count, count]);					} else {						ArrayStatus[count, count] = ['nmStatus___' + z, "Ativo"];						//log.info("valor do ARRAY " + ArrayStatus[count, count]);					}					z = z + 1;					count = count + 1;										break;				}			}		}	}		if (numActivity != "0") {		//Desabilita Grid		var x = 1;		var rows = parseInt(form.getValue("hiddenLinhasGrid"));				while (x <= rows) {			var field = form.getValue("nmOqueComo___" + x);			if (field == null) { 				x = x + 1;				rows = rows + 1;			} else {				form.setEnabled('nmOqueComo___' + x, false);					form.setEnabled('nmResponsavelAtiv___' + x, false);				form.setEnabled('nmPrazoConclusao___' + x, false);				form.setEnabled('nmStatus___' + x, false);				x = x + 1;			}		}	}		//Traz campos de readonly conforme atividade	var GERENCIA_ATIVIDADE = 3;	var VERIFICAR_EFICACIA = 4;		form.setEnabled("cdPlanoAcaoPA",false);	form.setEnabled("nmDataPA",false);	form.setEnabled("cdOcorrencia",false);	form.setEnabled("nmResponsavelOcorrencia",false);	form.setEnabled("nmResponsavelPA", false);	if (numActivity == GERENCIA_ATIVIDADE) {		form.setEnabled("nmPauta", false);		form.setEnabled("nmParticipantes", false);		form.setEnabled("nmDefinicoes", false);		form.setEnabled("nmAssunto", false);				for(var k = 0; k < ArrayStatus.length; k++) {			form.setValue(ArrayStatus[k][0], ArrayStatus[k][1]);		}	}	else if (numActivity == VERIFICAR_EFICACIA) {		form.setEnabled("nmPauta", false);		form.setEnabled("nmParticipantes", false);		form.setEnabled("nmDefinicoes", false);		form.setEnabled("nmAssunto", false);	}		//Retorna número da atividade dentro do HTML	customHTML.append("<script>function getWKNumState(){ return " + getValue("WKNumState") + "; }</script>");}